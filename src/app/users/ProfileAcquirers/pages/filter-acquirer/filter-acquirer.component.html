<section id="vehiclesSection" class="relative min-h-screen bg-gray-50">
  <app-header-acquirer></app-header-acquirer>

  <div class="absolute top-0 left-0 w-full h-full z-0">
    <img src="assets/background.png" class="w-full h-full object-cover opacity-50" alt="fondo decorativo" />
  </div>

  <div class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-28 py-8">

    <div class="mb-8 text-center sm:text-left">
      <h1 class="text-4xl font-bold text-customGreen drop-shadow-sm">{{ 'find_vehicles' | translate }}</h1>
      <p class="text-gray-600 mt-2 text-lg">Explore our selection available for rent or purchase.</p>
    </div>

    <div class="bg-white/90 backdrop-blur-sm p-6 rounded-2xl shadow-md mb-10 flex flex-wrap gap-6 items-center justify-center sm:justify-start border border-gray-100">

      <div class="flex items-center gap-2">
        <i class="material-icons text-customGreen">filter_list</i>
        <span class="font-bold text-gray-700">Filters:</span>
      </div>

      <mat-form-field appearance="fill" class="w-full sm:w-auto min-w-[200px]">
        <mat-label>{{ 'vehicle_type' | translate }}</mat-label>
        <mat-select [(value)]="selectedType" (selectionChange)="onTypeChange($event.value)">
          <mat-option *ngFor="let type of types" [value]="type">
            {{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full sm:w-auto min-w-[200px]">
        <mat-label>{{ 'price_order' | translate }}</mat-label>
        <mat-select [(value)]="selectedPrice" (selectionChange)="onPriceChange($event.value)">
          <mat-option value="Lowest to Highest">Lowest to Highest</mat-option>
          <mat-option value="Highest to Lowest">Highest to Lowest</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="vehicleData.length > 0; else noVehicles" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

      <mat-card *ngFor="let vehicle of vehicleData" class="transform transition duration-300 hover:scale-105 hover:shadow-2xl rounded-2xl overflow-hidden bg-white border border-gray-100">

        <div class="relative h-56 overflow-hidden">
          <img
            mat-card-image
            [src]="vehicle.imageUrl"
            [alt]="vehicle.name"
            class="w-full h-full object-cover transition duration-500 hover:opacity-90"
            onerror="this.src='assets/placeholder.png'"
          >
          <div class="absolute top-4 right-4 bg-white/90 px-3 py-1 rounded-full text-xs font-bold text-customGreen shadow-sm uppercase tracking-wide">
            {{ vehicle.type }}
          </div>
        </div>

        <mat-card-content class="p-6">
          <div class="flex justify-between items-start mb-2">
            <h3 class="text-xl font-bold text-gray-800 line-clamp-1">{{ vehicle.name }}</h3>
            <div class="flex items-center text-yellow-500 text-sm">
              <i class="material-icons text-sm mr-1">star</i>
              <span>{{ vehicle.review || 5 }}</span>
            </div>
          </div>

          <p class="text-gray-500 text-sm line-clamp-2 mb-4 min-h-[40px]">{{ vehicle.description }}</p>

          <div class="flex justify-between items-center border-t pt-4 mt-2">
            <div>
              <p class="text-xs text-gray-400">Rent Price</p>
              <p class="text-lg font-bold text-customGreen">${{ vehicle.priceRent }}<span class="text-xs font-normal text-gray-500">/hr</span></p>
            </div>
            <div class="text-right">
              <p class="text-xs text-gray-400">Buy Price</p>
              <p class="text-lg font-bold text-gray-700">${{ vehicle.priceSell }}</p>
            </div>
          </div>
        </mat-card-content>

        <mat-card-actions class="p-4 bg-gray-50 flex justify-center">
          <button
            [routerLink]="['/vehicleDetailsAcquirer', vehicle.id]"
            mat-raised-button
            color="primary"
            class="w-full py-1 font-bold rounded-lg shadow-none hover:shadow-md">
            {{ 'view_details' | translate }}
          </button>
        </mat-card-actions>
      </mat-card>

    </div>

    <ng-template #noVehicles>
      <div class="flex flex-col items-center justify-center text-center py-20 bg-white/50 rounded-3xl mt-10">
        <i class="material-icons text-6xl text-gray-300 mb-4">no_transfer</i>
        <h3 class="text-2xl font-bold text-gray-600 mb-2">No vehicles found</h3>
        <p class="text-gray-500">{{ 'no_vehicles_available' | translate }} for this category.</p>
        <button mat-button color="primary" class="mt-4" (click)="onTypeChange('All types')">View All</button>
      </div>
    </ng-template>

  </div>
</section>
